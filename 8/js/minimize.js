var link=document.querySelector(".map-btn"),popup=document.querySelector(".modal-write-us"),close=document.querySelector(".modal-close"),user_name=popup.querySelector("[name=first-name]"),form=popup.querySelector("form"),user_email=popup.querySelector("[name=email]"),storage_name=localStorage.getItem("user_name"),storage_email=localStorage.getItem("user_email"),message=popup.querySelector("[name=user-message]");link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storage_name?(user_name.value=storage_name,user_email.focus()):user_name.focus(),storage_email?(user_email.value=storage_email,user_name.focus()):user_email.focus(),(storage_name||storage_email)&&(user_name.value=storage_name,user_email.value=storage_email,message.focus())}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&popup.classList.remove("modal-show")}),form.addEventListener("submit",function(e){user_name.value&&user_email.value?(localStorage.setItem("user_name",user_name.value),localStorage.setItem("user_email",user_email.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))});